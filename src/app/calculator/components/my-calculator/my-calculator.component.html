<div class="calculator">
  <!-- В цикле выводим все калькуляьторы из calcGroup-->
  <!-- ng-container - тег к которому можно применять различные директивы, при этом в DOM дереве он не оставляет следа -->
  <!-- в ngFor так же есть переменные let i = index, let l = last -->
  <ng-container *ngFor="let group of calcGroups; let i = index">
    <div class="calculator__container">
      <span>(</span>
      <span>{{ i }}</span>
      <select class="calculator__select" [(ngModel)]="group.first.modificator">
        <option
          [value]="modificator.value"
          *ngFor="let modificator of calcMidifiers  | keyvalue"
        >
          {{ modificator.value }}
        </option>
      </select>
      <input type="number" class="calculator__input" [(ngModel)]="group.first.value">
      <select class="calculator__select" [(ngModel)]="group.operations">
        <option
          [value]="operation.value"
          *ngFor="let operation of calcOperations | keyvalue  ">
          {{ operation.value  }}
        </option>
      </select>
      <select class="calculator__select" [(ngModel)]="group.second.modificator">
        <option
          [value]="modificator.value"
          *ngFor="let modificator of calcMidifiers  | keyvalue"
        >
          {{ modificator.value }}
        </option>
      </select>
      <input type="number" class="calculator__input" [(ngModel)]="group.second.value">
      <span>)</span>
      <button class="calculator__btn"
              *ngIf="operationsBetweenGroups.length > 0"
              (click)="removeGroup(i)" >Удалить</button>
    </div>

    <select class="calculator__select"
            [(ngModel)]="operationsBetweenGroups[i]"
            *ngIf="operationsBetweenGroups.length > i"
    >
      <option
        [value]="operation.value"
        *ngFor="let operation of calcOperations | keyvalue"
      >
        {{ operation.value }}
      </option>
      <!-- TODO: 21-52 -->
    </select>
  </ng-container>

  <span class="calculator__result">{{ result ? result: 'Нажмите рассчитать' }}</span>

  <div class="calculator__history">
    <span class="calculator__history-title">история операций</span>
    <span *ngFor="let obj of history; let i = index">
      {{ i + 1 }} {{ obj }}
    </span>
  </div>

  <button class="calculator__btn" (click)="calcGroup()">Рассчитать</button>
  <button class="calculator__btn" (click)="addGroup()">Добавить группу</button>
</div>
